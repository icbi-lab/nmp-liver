process {
    withName: SCQC {
        container = "${projectDir}/containers/2022-schneeberger-liver-scanpy_2022-09-23.sif"
        // conda = "/data/scratch/sturm/conda/envs/2022-schneeberger-liver-scanpy"
        publishDir = [
            path: { "${params.outdir}/02_qc_and_filtering/" },
            mode: params.publish_dir_mode
        ]
    }
    withName: "JUPYTER.*" {
        ext.kernel = "python3"
        conda = "/data/scratch/sturm/conda/envs/2022-schneeberger-liver-scanpy"
        publishDir = [
            path: { "${params.outdir}/${meta.id}/" },
            mode: params.publish_dir_mode
        ]
    }
    withName: JUPYTER_SCVI {
        container = "${projectDir}/containers/2022-schneeberger-liver-scanpy_2022-09-23.sif"
        conda = null
        cpus = 8
    }
    withName: JUPYTER_NEUTRO {
        // TODO
        clusterOptions = '-V -R y -S /bin/bash -q all.q@zeus*'
    }
    withName: "DESEQ.*" {
        publishDir = [
            path: { "${params.outdir}/21_deseq/${task.process}/${id}/" },
            mode: params.publish_dir_mode
        ]
    }
}
